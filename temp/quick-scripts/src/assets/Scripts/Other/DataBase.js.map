{"version":3,"sources":["assets\\Scripts\\Other\\DataBase.ts"],"names":[],"mappings":";;;;;;AACA;IAII,kBAAY,OAAc;QAFlB,eAAU,GAAQ,CAAC,CAAC;QACrB,cAAS,GAAU,IAAI,CAAC;QAG3B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IAC5B,CAAC;IAGD;;OAEG;IACI,yBAAM,GAAb,UAAc,IAAK;QAEf,IAAI,CAAC,IAAI;YAAE,IAAI,GAAG,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7D,IAAI,IAAI,EACR;YACI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;YACvB,KAAI,IAAI,GAAG,IAAI,IAAI,EACnB;gBACI,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;aACzB;SACJ;QAAA,CAAC;IACN,CAAC;IAGD,sBAAW,wBAAE;aAAb;YAEI,OAAO,CAAC,CAAC;QACb,CAAC;;;OAAA;IAGD;;OAEG;IACI,yBAAM,GAAb;QAEI,IAAI,IAAI,GAAQ,EAAE,CAAC;QAEnB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5C,KAAI,IAAI,GAAG,IAAI,IAAI,EACnB;YACI,IAAG,GAAG,IAAE,UAAU,IAAE,GAAG,IAAE,WAAW,IAAE,GAAG,IAAE,YAAY,IAAE,GAAG,IAAE,UAAU;gBAAC,SAAS;YAClF,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;SACzB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED;;OAEG;IACI,4BAAS,GAAhB;QAEI,IAAG,IAAI,CAAC,UAAU,IAAE,CAAC,EACrB;YACI,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACrE;IACL,CAAC;IAGD;;OAEG;IACI,uBAAI,GAAX;QAEI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;QACzB,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;IACpE,CAAC;IAED;;OAEG;IACI,wBAAK,GAAZ;QACI,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,EAAE,CAAA;IAC/B,CAAC;IAED;;OAEG;IACI,6BAAU,GAAjB;QACI,EAAE,CAAC,GAAG,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;IACjD,CAAC;IACL,eAAC;AAAD,CApFA,AAoFC,IAAA","file":"","sourceRoot":"/","sourcesContent":["\r\nexport default class DataBase{\r\n    private _saveKey:string;\r\n    private _delaytime:number=0;\r\n    public saveDelay:number = 5000;\r\n    constructor(saveKey:string)\r\n    {\r\n        this._saveKey = saveKey;\r\n    }\r\n\r\n    \r\n    /**\r\n     * 读取数据\r\n     */\r\n    public decode(json?)\r\n    {\r\n        if (!json) json = cc.sys.localStorage.getItem(this._saveKey);\r\n        if (json)\r\n        {\r\n            json = JSON.parse(json)\r\n            for(var key in json)\r\n            {\r\n                this[key] = json[key];\r\n            }\r\n        };\r\n    }\r\n\r\n    \r\n    public get te():number\r\n    {\r\n        return 1;\r\n    }\r\n\r\n\r\n    /**\r\n     * 转化\r\n     */\r\n    public encode():any\r\n    {\r\n        var data: any = {};\r\n        \r\n        var user = JSON.parse(JSON.stringify(this));\r\n        for(var key in user)\r\n        {\r\n            if(key==\"_saveKey\"||key==\"saveDelay\"||key==\"_delaytime\"||key==\"instance\")continue;\r\n            data[key] = user[key];\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * 延时保存\r\n     */\r\n    public delaySave()\r\n    {\r\n        if(this._delaytime==0)\r\n        {\r\n            this._delaytime = setTimeout(this.save.bind(this),this.saveDelay);\r\n        }\r\n    }\r\n\r\n    \r\n    /**\r\n     * 保存\r\n     */\r\n    public save()\r\n    {\r\n        this._delaytime = 0;\r\n        let data = this.encode();\r\n        cc.sys.localStorage.setItem(this._saveKey,JSON.stringify(data));\r\n    }\r\n\r\n    /**\r\n     * 全部清除\r\n     */\r\n    public clear () {\r\n        cc.sys.localStorage.clear()\r\n    }\r\n\r\n    /**\r\n     * 清除一个\r\n     */\r\n    public removeItem () {\r\n        cc.sys.localStorage.removeItem(this._saveKey)\r\n    }\r\n}"]}