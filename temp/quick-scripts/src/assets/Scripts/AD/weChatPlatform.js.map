{"version":3,"sources":["assets\\Scripts\\AD\\weChatPlatform.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UserModel from \"../Other/UserModel\";\r\nimport Global from \"./Global\";\r\nimport PlatformBase, { IBannerAd, IRewardVideoAd } from \"./PlatformBase\";\r\n/**\r\n * 微信平台广告类\r\n */\r\nexport default class weChatPlatform extends PlatformBase {\r\n\r\n    bannerAd: IBannerAd = null //banner广告\r\n    bannerAd1: IBannerAd = null //banner广告\r\n    rewardVideoAd: IRewardVideoAd = null //激励视频\r\n    interstitialAd: IRewardVideoAd = null //插屏广告\r\n    customAd: any = null;\r\n    gameBtn: any = null;\r\n\r\n    private m_SDK: any;\r\n\r\n    //WX广告参数\r\n    private readonly WX_BANNERId: string = 'adunit-03ad30b2a00adc60'\r\n    private readonly WX_VIDEOId: string = 'adunit-6fbcc6a34b05eddb'\r\n    private readonly WX_TITIALADId: string = 'adunit-62eea9bfd001a4ea'\r\n\r\n    constructor() {\r\n        super();\r\n        this.m_SDK = (window as any).wx;\r\n        this.SHOW_MENU()\r\n        this.onShow();\r\n    }\r\n\r\n    protected onShow() {\r\n        var self = this;\r\n        this.m_SDK.onShow((res) => {\r\n            console.log(\"收到 onShow 回调:\\n\" + JSON.stringify(res));\r\n            if (self.shareCallback) {\r\n                self.shareCallback();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    protected onHide() {\r\n        var self = this;\r\n        this.m_SDK.onHide((res) => {\r\n            console.log(\"收到 onShow 回调:\\n\" + JSON.stringify(res));\r\n            if (self.shareCallback1) {\r\n                self.shareCallback1();\r\n            }\r\n        });\r\n\r\n    }\r\n    bannerBoool: boolean = false;\r\n    bannerBoool1: boolean = false;\r\n    bannerId: number = 0;\r\n    useId: number = 0;\r\n\r\n    SHOW_BANNER() {\r\n\r\n        if (UserModel.instance.adCd) return;\r\n\r\n        this.DESTROY_BANNER()\r\n\r\n        if (this.bannerId == 0) {\r\n            this.bannerId++;\r\n            if (!this.bannerBoool) {\r\n                this.useId = 0\r\n                this.bannerAd.show();\r\n            } else {\r\n                this.useId = 1\r\n                this.bannerAd1.show();\r\n            }\r\n        } else {\r\n            this.bannerId++;\r\n            if (this.bannerId > 1) {\r\n                this.bannerId = 0;\r\n            }\r\n            if (!this.bannerBoool1) {\r\n                this.useId = 1\r\n                this.bannerAd1.show();\r\n            } else {\r\n                this.useId = 0\r\n                this.bannerAd.show();\r\n            }\r\n        }\r\n        return;\r\n    }\r\n\r\n    LOAD_BANNER() {\r\n        //创建广告\r\n        console.log('创建banner')\r\n        let winSize = this.m_SDK.getSystemInfoSync();\r\n        let bannerHeight = 60; //80\r\n        let bannerWidth = 320;\r\n        this.bannerBoool = false;\r\n        this.bannerAd = this.m_SDK.createBannerAd({\r\n            adUnitId: this.WX_BANNERId,\r\n            // adIntervals: 40,\r\n            style: {\r\n                left: (winSize.windowWidth - bannerWidth) / 2,\r\n                top: bannerHeight,//winSize.windowHeight - bannerHeight-20,\r\n                width: bannerWidth,\r\n            }\r\n        })\r\n\r\n        this.bannerAd.onResize(res => {\r\n            //@ts-ignore\r\n            this.bannerAd.style.top = winSize.windowHeight - this.bannerAd.style.realHeight + 0.1;\r\n        })\r\n\r\n        this.bannerAd.onError(err => {\r\n            console.log(\"BANNER报错\", err)\r\n            this.bannerBoool = true;\r\n        })\r\n\r\n        //加载广告\r\n        console.log(\"加载banner广告\");\r\n        this.bannerAd.onLoad(() => {\r\n        })\r\n    }\r\n\r\n    LOAD_BANNER1() {\r\n        //创建广告\r\n        console.log('创建banner1')\r\n        let winSize = this.m_SDK.getSystemInfoSync();\r\n        let bannerHeight = 60; //80\r\n        let bannerWidth = 320;\r\n        this.bannerBoool1 = false;\r\n        this.bannerAd1 = this.m_SDK.createBannerAd({\r\n            adUnitId: 'adunit-500247929c5984a6',\r\n            // adIntervals: 40,\r\n            style: {\r\n                left: (winSize.windowWidth - bannerWidth) / 2,\r\n                top: bannerHeight,//winSize.windowHeight - bannerHeight-20,\r\n                width: bannerWidth,\r\n            }\r\n        })\r\n\r\n        this.bannerAd1.onResize(res => {\r\n            //@ts-ignore\r\n            this.bannerAd1.style.top = winSize.windowHeight - this.bannerAd1.style.realHeight + 0.1;\r\n        })\r\n\r\n        this.bannerAd1.onError(err => {\r\n            console.log(\"BANNER报错1\", err)\r\n            this.bannerBoool1 = true;\r\n        })\r\n\r\n        //加载广告\r\n        console.log(\"加载banner广告1\");\r\n        this.bannerAd1.onLoad(() => {\r\n        })\r\n    }\r\n\r\n\r\n    showBannerad() {\r\n        this.bannerAd.show()\r\n    }\r\n\r\n    HIDE_BANNER() {\r\n\r\n        this.bannerAd.hide()\r\n    }\r\n\r\n\r\n\r\n    showCreateCustomAd() {\r\n\r\n        if (this.customAd) {\r\n            this.customAd.destroy()\r\n            this.customAd = null;\r\n        }\r\n\r\n\r\n\r\n        this.customAd.onError(err => {\r\n            console.log(\"模板报错\", err)\r\n        })\r\n\r\n        //加载广告\r\n        console.log(\"加载模板广告\");\r\n        this.customAd.onLoad(() => {\r\n            console.log('模板广告加载成功');\r\n        })\r\n\r\n        this.customAd.onClose(() => {\r\n            console.log('模板广告关闭');\r\n            this.scheduleOnce(() => {\r\n                if (cc.director.getScene().name == 'bundle_menu') {\r\n                    this.showCreateCustomAd()\r\n                }\r\n            }, 30)\r\n        })\r\n\r\n        this.customAd.show()\r\n    }\r\n\r\n    hideCreateCustomAd() {\r\n        if (this.customAd) {\r\n            this.customAd.destroy()\r\n            this.customAd = null;\r\n        }\r\n    }\r\n\r\n    public trackEvent(type: string, param?: object) {\r\n        if (param) {\r\n            window[\"wx\"].uma.trackEvent(type, param)\r\n        } else {\r\n            window[\"wx\"].uma.trackEvent(type)\r\n        }\r\n\r\n    }\r\n\r\n\r\n    DESTROY_BANNER() {\r\n        if (this.bannerId == 1) {\r\n            console.log('销毁广告');\r\n            if (!this.bannerAd) return\r\n            this.bannerAd.destroy()\r\n            this.bannerAd = null;\r\n            this.LOAD_BANNER();\r\n            if (this.useId == 1) {\r\n                if (!this.bannerAd1) return\r\n                this.bannerAd1.destroy()\r\n                this.bannerAd1 = null;\r\n                this.LOAD_BANNER1();\r\n            }\r\n        } else {\r\n            console.log('销毁广告');\r\n            if (!this.bannerAd1) return\r\n            this.bannerAd1.destroy()\r\n            this.bannerAd1 = null;\r\n            this.LOAD_BANNER1();\r\n            if (this.useId == 0) {\r\n                if (!this.bannerAd) return\r\n                this.bannerAd.destroy()\r\n                this.bannerAd = null;\r\n                this.LOAD_BANNER();\r\n            }\r\n        }\r\n    }\r\n\r\n    //微信打点上报\r\n    reportUserBehaviorBranchAnalytics(uid, type) {\r\n        this.m_SDK.reportUserBehaviorBranchAnalytics({\r\n            branchId: uid,\r\n            eventType: type // 1：曝光； 2：点击\r\n        });\r\n    }\r\n\r\n    /***************************   WX 激励视频   *******************/\r\n\r\n    //销毁激励视频\r\n    DESTROY_VIDEO() {\r\n        if (!this.rewardVideoAd) return\r\n        this.rewardVideoAd.destroy() // 销毁组件，释放资源\r\n    }\r\n\r\n    private errBool = false;\r\n    public _adcb1: any;\r\n    public _adcb: any;\r\n    adNum: number = 0;\r\n    LOAD_VIDEO() {\r\n        var self = this;\r\n        console.log(\"---------------------watchAd\")\r\n        self.errBool = false;\r\n        console.log('视频',self.rewardVideoAd)\r\n        if (self.rewardVideoAd) {\r\n            console.log('视频0000',self.rewardVideoAd)\r\n        } else {\r\n            console.log('视频0',)\r\n            self.rewardVideoAd = this.m_SDK.createRewardedVideoAd({\r\n                //以下所有 API 需支持最低平台版本号'1051' (minPlatformVersion>='1051')\r\n                adUnitId: this.WX_VIDEOId\r\n            });\r\n            console.log('视频1',self.rewardVideoAd)\r\n            self.rewardVideoAd.onClose((data) => {\r\n                console.log('ad close.');\r\n                self.LOAD_VIDEO();\r\n                // 用户点击了【关闭广告】按钮\r\n                // 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n                setTimeout(() => {\r\n                    if (data && data.isEnded || data === undefined) {\r\n                        self._adcb();\r\n                    } else {\r\n                        self._adcb1();\r\n                    }\r\n                }, .1);\r\n            });\r\n            self.rewardVideoAd.onError(function (err) {\r\n                self.errBool = true;\r\n                console.log(\"视频ONERROR\", JSON.stringify(err));\r\n            });\r\n            // self.pauseAll();\r\n            self.rewardVideoAd.onLoad(() => {\r\n                console.log('ad loaded.');\r\n                // self.rewardVideoAd.offLoad();\r\n                self.errBool = false;\r\n            })\r\n        }\r\n        this.rewardVideoAd.load();\r\n    }\r\n\r\n\r\n    lastClickTime: number = 0;\r\n    /**\r\n     * 关闭视频回调\r\n     * @param goodVideo 看完视频\r\n     * @param errorVideo 未看完视频\r\n     * @param index  额外参数\r\n     */\r\n    CLOSE_VIDEO(goodVideo: Function, errorVideo: Function, unLoadVideo: Function, ID?: string) {\r\n        //创建激励视频    \r\n        // console.log(`创建激励视频广告, adUnitId:：`, this.WX_VIDEOId)\r\n\r\n        let CLICK_INTERVAL = 2000\r\n        console.log('时间0', new Date().getTime() - this.lastClickTime)\r\n        if (this.lastClickTime != 0 && new Date().getTime() - this.lastClickTime < CLICK_INTERVAL) {\r\n            // TipMgr.showTip('暂无广告')\r\n            return;\r\n        }\r\n        this.lastClickTime = new Date().getTime();\r\n\r\n        this._adcb = goodVideo;\r\n        this._adcb1 = errorVideo;\r\n        console.log(\"视频正确\", this.errBool);\r\n        if (this.errBool) {\r\n            console.log(\"错误ing\");\r\n            // console.log(\"视频ONERROR\", JSON.stringify(err));\r\n            unLoadVideo()\r\n            // TipMgr.showTip('暂无广告')\r\n            this.LOAD_VIDEO();\r\n        } else {\r\n            if (!this.rewardVideoAd) {\r\n                // setTimeout(() => {\r\n                    this.LOAD_VIDEO();\r\n                // }, 1000);\r\n                unLoadVideo()\r\n            } else {\r\n                this.rewardVideoAd.show().then(() => {\r\n                    this.adNum = 0;\r\n                    Global.platform.trackEvent(ID)\r\n                }).catch((err) => {\r\n                    this.adNum++;\r\n                    unLoadVideo()\r\n                    if (this.adNum > 3) {\r\n                        // this.rewardVideoAd.offLoad();\r\n                        // this.rewardVideoAd.offError();\r\n                        // this.rewardVideoAd.offClose();\r\n                        // this.rewardVideoAd.destroy();\r\n                        // this.rewardVideoAd = null\r\n                    }\r\n                    // setTimeout(() => {\r\n                        this.LOAD_VIDEO();\r\n                    // }, 1000);\r\n                    console.log(\"视频ONERROR报错中\");\r\n                    // self.share(callback);\r\n                })\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /***************************   WX 插屏   *******************/\r\n\r\n    CREATE_TITIALAD() {\r\n        return\r\n    }\r\n\r\n    LOAD_TITIALAD() {\r\n        return\r\n    }\r\n\r\n    SHOW_TITIALAD() {\r\n        //创建\r\n        this.interstitialAd = this.m_SDK.createInterstitialAd({\r\n            adUnitId: this.WX_TITIALADId\r\n        })\r\n\r\n        this.interstitialAd.onError(err => {\r\n            console.log(err)\r\n        })\r\n        //加载\r\n        this.interstitialAd.onLoad(() => {\r\n            console.log('插屏 广告加载成功')\r\n        })\r\n        //显示\r\n        this.interstitialAd.show().catch((err) => {\r\n            console.error(err)\r\n        })\r\n    }\r\n\r\n    CLOSE_TITIALAD() {\r\n        this.interstitialAd.onClose(res => {\r\n            console.log('插屏 广告关闭')\r\n            this.SHOW_BANNER()\r\n        })\r\n    }\r\n\r\n    /*******************************************微信手机震动***********************************************/\r\n\r\n    /**\r\n     * 手机震动\r\n     * @param type 震动强度类型，有效值为：heavy、medium、light\r\n     * @param success 接口调用成功的回调函数\r\n     * @param fail 接口调用失败的回调函数\r\n     * @param complete 接口调用结束的回调函数（调用成功、失败都会执行）\t\r\n     */\r\n    VibrateShort(type: string, success?: Function, fail?: Function, complete?: Function) {\r\n        this.m_SDK.vibrateShort(type, success, fail, complete)\r\n\r\n        if (success) {\r\n            success()\r\n        }\r\n        else if (fail) {\r\n            fail()\r\n        }\r\n    }\r\n\r\n    VibrateLong(success?: Function, fail?: Function, complete?: Function) {\r\n        this.m_SDK.vibrateLong(success, fail, complete)\r\n    }\r\n\r\n    /**************************************微信分享转发功能***************************************/\r\n    //展示转发菜单\r\n    SHOW_MENU() {\r\n\r\n        // let random = Common.getRandom(0, 1)\r\n\r\n        this.m_SDK.showShareMenu({\r\n            withShareTicket: true,\r\n            menus: ['shareAppMessage', 'shareTimeline']\r\n        })\r\n\r\n        const id: string[] = ['CzvqimV+SsSP23PrZAkFxA==']\r\n        const url: string[] = ['https://mmocgame.qpic.cn/wechatgame/9m9eQRfGLrNWy8fDjeicdtoLOIIZEAfZ7P6zFBVfc2aOQve49WcvNicFtT91aCcQIB/0']\r\n\r\n        this.m_SDK.onShareAppMessage(function () {\r\n            return {\r\n                title: '人生重开模拟器',\r\n                imageUrlId: id[0],\r\n                imageUrl: url[0]\r\n            }\r\n        })\r\n\r\n        // 朋友圈\r\n        this.m_SDK.onShareTimeline(() => {\r\n            return {\r\n                title: '人生重开模拟器',\r\n                // imageUrl: '', // 图片 URL\r\n                // query: 'a=1&b=2'\r\n            }\r\n        })\r\n    }\r\n\r\n    //主动分享\r\n    Share(callback: (success: boolean) => void): void {\r\n        // let random = Common.getRandom(0, 1)\r\n        const id: string[] = ['CzvqimV+SsSP23PrZAkFxA==']\r\n        const url: string[] = ['https://mmocgame.qpic.cn/wechatgame/9m9eQRfGLrNWy8fDjeicdtoLOIIZEAfZ7P6zFBVfc2aOQve49WcvNicFtT91aCcQIB/0']\r\n\r\n        this.m_SDK.shareAppMessage({\r\n            title: \"人生重开模拟器\",\r\n            imageUrl: url[0],\r\n        })\r\n    }\r\n\r\n    GameClubButton() {\r\n\r\n        if (this.gameBtn) {\r\n            this.gameBtn.destroy();\r\n            this.gameBtn = null;\r\n        }\r\n\r\n        let winSize1 = this.m_SDK.getSystemInfoSync();\r\n        this.gameBtn = this.m_SDK.createGameClubButton({\r\n            // icon: 'green',\r\n            image: 'https://byhcdn.333666999.club/icon/1/Btn_youxiquan.png',\r\n            style: {\r\n                left: winSize1.windowWidth - 100,\r\n                top: winSize1.windowHeight / 2 - 120,\r\n                width: 76 * 0.5,\r\n                height: 75 * 0.5,\r\n            }\r\n        })\r\n        this.gameClubHiding();\r\n    }\r\n\r\n    gameClubSHow() {\r\n        if (this.gameBtn) this.gameBtn.show();\r\n    }\r\n\r\n    gameClubHiding() {\r\n        if (this.gameBtn) this.gameBtn.hide();\r\n\r\n    }\r\n\r\n    gameClubHide() {\r\n        if (this.gameBtn) {\r\n            this.gameBtn.destroy();\r\n            this.gameBtn = null;\r\n        }\r\n\r\n    }\r\n\r\n    //隐藏按钮\r\n    HIDE_MENU() {\r\n        this.m_SDK.hideShareMenu()\r\n    }\r\n\r\n    PlatformName() {\r\n        return 'weChatPlatform';\r\n    }\r\n}\r\n"]}